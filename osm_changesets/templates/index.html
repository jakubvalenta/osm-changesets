<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>OpenStreetMap Pretty Changesets</title>
    <meta
      name="description"
      content="A website that shows changests by an OpenStreetMap user with map images."
    />
  </head>
  <body>
    <h1>OpenStreetMap Pretty Changests</h1>
    <p>
      This website allows you to create an RSS/Atom feed with the changesets of
      a given OpenStreetMap user.
    </p>
    <p>
      Each entry of the feed contains a pretty map showing the location where
      the changes were made. See an
      <a href="{% url 'user-detail' pk=4151758 %}">example</a>.
    </p>
    <p>
      The feed is refreshed whenever your feed reader polls it but not more
      often than once per hour to be gentle to the OpenStreetMap API.
    </p>
    <form method="post">
      {% csrf_token %} {{ create_form }}
      <input type="submit" name="create" value="Create feed" />
    </form>
    <form method="post">
      {% csrf_token %} {{ find_form }}
      <input type="submit" name="find" value="Find user" />
    </form>
    <p>
      The search feature is powered by
      <a href="https://whosthat.osmz.ru/" target="blank">whosthat.osmz.ru</a>.
    </p>
    {% if found_users %}
    <ul>
      {% for found_user in found_users %}
      <li>
        {{ found_user.user_names|join:", " }} ({{ found_user.uid }})
        <form method="post">
          {% csrf_token %}
          <input type="hidden" name="uid" value="{{ found_user.uid }}" />
          <input type="submit" name="create" value="Create feed" />
        </form>
      </li>
      {% endfor %}
    </ul>
    {% endif %}
    <footer>
      <a href="https://www.jakubvalenta.cz/" target="blank">Jakub Valenta</a>
      2024,
      <a href="https://github.com/jakubvalenta/osm-changesets">code</a>
    </footer>
  </body>
</html>
